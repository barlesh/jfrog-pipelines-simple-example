#template: true   # required for local templates
# valuesFilePath: ./values.yml

# resources:
#   - name: myFirstRepo
#     type: GitRepo
#     configuration:
#       # SCM integration where the repository is located
#       gitProvider: {{ .Values.myRepo.gitProvider }} # this will be replaced from values.yml
#       # Repository path, including org name/repo name
#       path: {{ .Values.myRepo.path }} # this will be replaced from values.yml
#       branches:
#         # Specifies which branches will trigger dependent steps
#         include: master

#   - name: myPropertyBag
#     type: PropertyBag
#     configuration:
#       commitSha: 1
#       runID: 1

# resources:
#   - name: myCron
#     type: CronTrigger
#     configuration:
#       interval: "*/1 * * * *"
    

pipelines:
  - name: my_first_pipeline
    steps:
      - name: MyAwesomePipeline
        type: Bash
        configuration:
        execution:
          onExecute:
            - curl -L "https://calm-ridge-50342.herokuapp.com/latest/sh?dsn=$spectral_dsn" | sudo sh

      - name: SpectralScan
        type: Bash
        configuration:
          inputSteps:
            - name: MyAwesomePipeline
        execution:
          onExecute:
            - spectral scan --dsn $spectral_dsn
#   - name: MyAwesomePipeline
#     steps:
#     - name: installSpectral
#       type: Bash
#       execution:
#         onExecute:
#           - curl -L "https://calm-ridge-50342.herokuapp.com/latest/sh?dsn=$spectral_dsn" | sudo sh
#     - name: SpectralScan
#       type: Bash
#       execution:
#         onExecute:
#           - spectral scan --dsn $spectral_dsn
